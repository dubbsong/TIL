## Inside JavaScript

송형주, 고현준 지음

<br>

### 지은이의 말

- 모든 학문 분야가 마찬가지겠지만, 특히 IT 분야에서 새로운 지식을 습득할 때 가장 중요한 것은 바로 그 분야의 핵심 원리를 정확히 이해하는 것이다.
- 원리를 정확히 이해하지 않은 개발 관련 지식으로 프로젝트를 진행했다가는 초기에는 빠른 성과를 낼 수 있을지 모르지만, 결국에는 안다고 대충 넘어갔던 부분이 개발자의 발목을 잡을 것이며, 이는 프로젝트 지연으로 이어질 수 있다.
- 필자는 자바스크립트가 굉장히 쉬운 언어이며, 무조건 코드를 가져다 쓰면 쉽게 개발할 수 있는 것으로 생각했었다.
- 급기야 자바스크립트 언어를 통해 서버 기반 프로그래밍을 할 수 있게끔 해주는 Node.js 프로그래밍을 진행했을 때 필자는 결국 두 손을 들고 말았다.
- Node.js 개발 경험이 있는 개발자들은 아마 이해할 수 있을 것이다. 자바스크립트 언어의 특성을 제대로 이해하는 것이 얼마나 중요한 것인지를.
- 학습법에 대해서 얘기할 때 가장 중요한 것이 바로 자신이 무엇을 모르는지를 정확히 파악해야 한다는 것이다. 그래야 무엇을 집중해서 공부해야 하는지를 정확히 파악할 수 있기 때문이다.

<br>

```javascript
function object(o) {
  function F() {}
  F.prototype = o;
  return new F();
}
```

<br>

### CHAPTER 01

### 자바스크립트 기본 개요

<br>

<br>

### 1. 소개

- 자바스크립트는 웹 브라우저에서 동작하는 스크립트 언어이다.
- 초창기 자바스크립트는 웹 페이지 제작에 있어서 보조적인 기능을 수행하기 위한 용도로써 사용했다. 대부분의 로직은 주로 웹 서버에서 실행되었고, 클라이언트인 웹 브라우저에서는 서버로부터 받은 HTML과 CSS, 데이터로 렌더링을 해주는 수준이었다. 이 시절에 자바스크립트는 그다지 중요한 역할을 담당하지 못했다. 다만 소수의 자바스크립트 프로그래머들에 의해 여러 가지 연구가 이루어지고, prototype.js와 같은 주요 라이브러리들이 개발된다. 특히, 과거에 서버에서 담당하던 역할들이 상당 부분 웹 브라우저로 이동하였고, 자바스크립트는 이 변화의 중심에 서게 된다. 게다가, jQuery의 등장으로 보다 쉽게 DOM(Document Object Model)을 핸들링하게 되면서 많은 발전을 이루었다.
- Node.js의 등장으로 자바스크립트를 이용한 서버 개발이 활발해지면서 더욱 많은 개발자가 자바스크립트를 사용하게 되었다.
- 여전히 많은 개발자가 아직 자바스크립트의 독특한 특성을 완벽하게 이해하지 못한 채 개발하고 있다.

<br>

### 2. 자바스크립트 활용 범위

- 이제는 자바스크립트만으로 웹 서버와 클라이언트인 웹 페이지 개발을 동시에 할 수 있는 수준까지 이른다.

<br>

##### 1) 웹 개발

jQuery를 비롯하여 knockout, backbone 등의 라이브러리는 웹 개발자에게 이미 중요한 컴포넌트로 자리 잡았다. 이제는 자바스크립트를 완벽하게 이해하지 못하면 좋은 웹 개발자라는 말을 들을 수 없게 되었다.

<br>

##### 2) 서버 개발

Node.js의 출현으로 자바스크립트를 활용한 서버 개발도 활발히 이루어지고 있다. express, socket.io 등의 라이브러리는 보다 쉽게 자바스크립트로 서버를 개발할 수 있는 환경을 제공해준다.

<br>

##### 3) 애플리케이션 개발

웹 기반 플랫폼에서 구동되는 애플리케이션 개발에 자바스크립트는 없어서는 안 될 핵심 요소가 되었다.특히 폰갭(PhoneGap)과 같은 크로스 플랫폼 개발 도구를 이용하면 DOM 요소를 핸들링하여 렌더링하는 것에서부터 더 나아가 디바이스의 동작에 대한 제어도 가능해지고 있다.

<br>

### 3. 자바스크립트의 핵심 개념

##### 1) 객체

자바스크립트의 거의 모든 것은 객체이다. '거의'라는 표현을 쓰는 이유는 몇 가지가 제외되기 때문이다. 바로 기본 데이터 타입인 boolean, number, string이다. 그리고 특별한 값인 null, undefined도 해당된다. 이를 제외한 나머지는 모두 객체이다. 앞의 세 가지 기본 데이터 타입은 모두 객체처럼 다룰 수도 있다. 그렇기 때문에 자바스크립트는 null과 undefined를 제외한 모든 것을 객체로 다룰 수 있다.

<br>

##### 2) 함수

자바스크립트에서는 함수도 객체로 취급한다. 일반적인 객체보다 조금 더 많은 기능이 있는 객체라고 할 수 있다. 하지만 이렇게 단순히 표현하기엔 자바스크립트에서 함수는 상당히 중요하다. 이는 함수가 일급 객체(First class object)로 다뤄지기 때문이다.

<br>

##### 3) 프로토타입

모든 객체는 숨겨진 링크(Link)인 프로토타입(Prototype)을 가진다. 이 링크는 해당 객체를 생성한 생성자의 프로토타입 객체를 가리킨다. 이 링크를 ECMAScript에서는 [[Prototype]]이라고 표현한다. 이 링크로 자바스크립트는 훨씬 더 다양하게 자신만의 자료 구조를 작성할 수 있다.

<br>

##### 4) 실행 컨텍스트와 클로저

자바스크립트는 자신만의 독특한 과정으로 실행 컨텍스트를 만들고 그 안에서 실행이 이루어진다. 이 실행 컨텍스트는 자신만의 유효 범위(Scope)를 갖는데, 이 과정에서 클로저를 구현할 수 있다. 이것은 자바스크립트를 제대로 이해하기 위한 핵심 개념이지만, 이해하기가 그렇게 쉬운 개념은 아닌 듯하다.

<br>

- 이 개념들은 자바스크립트 개발자가 되기 위해서 반드시 이해해야 한다.
- 자바스크립트는 이 핵심 개념들을 바탕으로 다음과 같은 프로그래밍이 가능하다.

<br>

### 4. 자바스크립트와 객체지향 프로그래밍

- 자바스크립트는 클래스를 지원하지 않지만 객체지향 프로그래밍이 가능하다.
- 프로토타입 체인과 클로저로 객체지향 프로그래밍에서 제시하는 상속, 캡슐화, 정보 은닉 등의 개념을 소화할 수 있다.

<br>

### 5. 자바스크립트와 함수형 프로그래밍

- 자바스크립트는 함수형 프로그래밍이 가능하다.
- 함수형 프로그래밍은 높은 수준의 모듈화를 가능케 하는 매우 효율적인 프로그래밍 방법이다.
- 자바스크립트는 주요 특성인 일급 객체로서의 함수 특성과 클로저를 활용하여 함수형 프로그래밍을 가능케 한다.
- 함수형 프로그래밍 기법으로 구현된 코드는 제 3자가 해석하기가 상당히 난해하다.

<br>

### 6. 자바스크립트의 단점

- 자바스크립트는 굉장히 유연한 언어이고 뛰어난 표현력을 가지고 있다. 하지만 이러한 특성 때문에 종종 디버깅에 어려움을 겪기도 한다. 특히, 느슨한 타입 체크는 개발자에게 타입 체크에 대한 자유를 주지만, 컴파일 타임에서 잡지 못하는 오류는 고스란히 런타임 오류로 발견된다.
- 자바스크립트를 둘러싼 중요한 논란 중에 하나가 전역 객체의 존재이다. 최상위 레벨의 객체들은 모두 전역 객체 안에 위치하는데, 이는 이름 충돌의 위험성이 있다. 프로그래머는 이 부분에 대해 신경 쓰는 것을 게을리하면 안 된다.

<br>

### CHAPTER 02

### 자바스크립트 개발 환경

- 파이어폭스에서 파이어버그(firebug)라는 애드온이 나오고, 크롬에서 크롬 개발자 도구를 지원하면서 한결 디버깅이 간편해졌다.

<br>

### CHAPTER 03

### 자바스크립트 데이터 타입과 연산자

- 모든 언어의 기본은 데이터 타입을 파악하는 것에서부터 시작한다.
  - 기본 타입 - Number, String, Boolean, undefined, null
  - 참조 타입 - Object - Array, Functino, 정규표현식

<br>

<br>

### 1) 자바스크립트 기본 타입

- 자바스크립트에서 기본 타입은 **숫자, 문자열, 불린값**을 비롯해 **null**과 **undefined**라는 타입이 있다. 이들 타입의 특징은 그 자체가 하나의 값을 나타낸다는 것이다. 
- typeof 연산자는 피연산자의 타입을 리턴한다.
- 자바스크립트는 **느슨한 타입 체크 언더**다. 엄격한 타입 체크 언어인 C언어는 변수를 선언할 때 변수에 저장할 데이터의 종류(문자, 정수, 실수 등)에 따라 char, int, float 등의 예약어를 이용해서 변수의 데이터 타입을 지정해야 한다. 그리고 이렇게 지정된 변수의 데이터 타입에 맞게 해당 변수에 값을 저장하고 사용하는 것이 일반적이다.
- 반면 자바스크립트는 변수를 선언할 때 타입을 미리 정하지 않고, var라는 한 가지 키워드로만 변수를 선언한다. 이렇게 선언된 변수에는 어떤 타입의 데이터라도 저장하는 것이 가능하다. 따라서 자바스크립트는 변수에 어떤 형태의 데이터를 저장하느냐에 따라 해당 변수의 타입이 결정된다. 이는 C나 자바같이 엄격한 타입 체크 언어에 익숙한 독자들에겐 어색할 수도 있을 것이다.

<br>

```javascript
var intNum = 10;
var floatNum = 0.1;
var singleQuoteStr = 'single quote string';
var boolVar = true;
var emptyVar;
var nullVar = null;

console.log(
	typeof intNum,			// number
  	typeof floatNum,		// number
  	typeof singleQuoteStr,	// string
  	typeof boolVar,			// boolean
  	typeof emptyVar,		// undefined
  	typeof nullVar			// object
);
```

<br>

#### 1)) 숫자

- C언어의 경우 정수냐 실수냐에 따라 int, long, float, double 등과 같은 다양한 숫자 타입이 존재하지만, 자바스크립트는 하나의 숫자형만 존재한다.
- 자바스크립트에서는 모든 숫자를 64비트 부동 소수점 형태로 저장한다. 이는 C언어의 double 타입과 유사하다.
- 자바스크립트에서는 정수형이 따로 없고, 모든 숫자를 실수로 처리하므로 나눗셈 연산을 할 때는 주의해야 한다.
- C언어에서 5/2는 소수 부분을 버린 2가 출력된다. 반면에 자바스크립트에서는 5와 2가 둘 다 정수가 아닌 실수로 취급되므로 소수 부분까지 출력된 2.5가 결과값이 된다. C언어에 익숙한 개발자의 경우는 특히 주의해야 한다.
- C언어 나눗셈 연산 결과와 같이 소수 부분을 버린 정수 부분만을 구하고 싶다면, **Math.floor()** 메소드를 사용하면 된다.

```javascript
var num = 5 / 2;

console.log(num);				// 2.5
console.log(Math.floor(num));	// 2
```

<br>

#### 2)) 문자열

- 문자열은 작은 따옴표('')나 큰 따옴표("")로 생성한다.
- 문자열은 문자 배열처럼 인덱스를 이용해서 접근할 수 있다.
- 한 번 정의된 문자열은 변하지 않는다. 한 번 생성된 문자열은 읽기만 가능하지 수정이 불가능하다.

```javascript
var str = 'test';
console.log(str[0], str[1], str[2], str[3]);	// t e s t

// 첫 글자를 대문자로 변경해도 변하지 않는다.
str[0] = 'T';
console.log(str);	// test
```

<br>

#### 3)) 불린값

- 자바스크립트는 true와 false 값을 나타내는 불린 타입을 가진다.

<br>

#### 4)) null과 undefined

- 이 두 타입은 모두 **'값이 비어있음'**을 나타낸다.
- 자바스크립트 환경 내에서 기본적으로 값이 할당되지 않은 변수는 undefined 타입이며, undefined 타입의 변수는 변수 자체의 값 또한 undefined이다. **undefiend는 타입이자, 값을 나타낸다**는 것에 주의하자.
- null 타입 변수의 경우는 개발자가 명시적으로 값이 비어있음을 나타내는 데 사용한다.
- 주의할 점은 nullVar의 typeof 결과가 null이 아니라 **object**라는 것이다. 때문에 자바스크립트에서는 null 타입 변수인지를 확인할 때 typeof 연산자를 사용하면 안 되고, 일치 연산자(===)를 사용해서 변수의 값을 직접 확인해야 한다.

```javascript
var nullVar = null;

console.log(typeof nullVar === null);	// false
console.log(nullVar === null);			// true
```

<br>

<br>

### 2) 자바스크립트 참조 타입 (객체 타입)

- 자바스크립트에서 숫자, 문자열, 불린값, null, undefined 같은 기본 타입을 제외한 모든 값은 객체다. 따라서 배열, 함수, 정규표현식 등도 모두 결국 자바스크립트 객체로 표현된다.
- 객체는 **'이름(key):값(valuse)'** 형태의 프로퍼티들을 저장하는 컨테이너로서, 컴퓨터 과학 분야에서 해시(Hash)라는 자료구조와 상당히 유사하다.
- 자바스크립트에서 기본 타입은 하나의 값만을 가지는 데 비해, 참조 타입인 객체는 여러 개의 프로퍼티들을 포함할 수 있으며, 이러한 객체의 프로퍼티는 기본 타입의 값을 포함하거나, 다른 객체를 가리킬 수도 있다. 이러한 프로퍼티의 성질에 따라 객체의 프로퍼티는 함수로 포함할 수 있으며, 자바스크립트에서는 이러한 프로퍼티를 **메소드**라고 부른다.

<br>

#### 1)) 객체 생성



































